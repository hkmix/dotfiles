#!/bin/bash

compiler="gcc"

if [[ "$#" -lt 2 || "$1" == "--help" ]]; then
    echo "Usage: ${0##*/} type file \"compilerargs\" \"outputargs\""
    echo "  Compile a file. Accepted types are:"
    echo "    c, cpp"
    echo "  Executes:"
    echo "    \${compiler} compilerargs file outputargs"
    [[ "$1" == "--help" ]] && exit 0 || exit 1
fi

case "$1" in
    "c")
        compiler="gcc"
        ;;
    "cpp")
        compiler="g++"
        ;;
    *)
        echo "File type is not supported"
        exit 1
        ;;
esac

case "$#" in
    2)
        $compiler "$2"
        ;;
    3)
        $compiler $3 "$2"
        ;;
    *)
        $compiler $3 "$2" $4
        ;;
esac
